function cov_bkzqwdtfp(){var path="D:\\CAPGEMINI\\MEANSTACK\\CASE STUDY\\RAILWAY\\BACKEND\\admins\\Admin.js";var hash="48f15b5981c8ff1d124822d0f6893043d69ab28a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"D:\\CAPGEMINI\\MEANSTACK\\CASE STUDY\\RAILWAY\\BACKEND\\admins\\Admin.js",statementMap:{"0":{start:{line:22,column:16},end:{line:22,column:35}},"1":{start:{line:23,column:14},end:{line:23,column:31}},"2":{start:{line:24,column:19},end:{line:40,column:3}},"3":{start:{line:50,column:0},end:{line:54,column:3}},"4":{start:{line:51,column:13},end:{line:51,column:35}},"5":{start:{line:52,column:2},end:{line:52,column:54}},"6":{start:{line:53,column:2},end:{line:53,column:9}},"7":{start:{line:57,column:0},end:{line:68,column:1}},"8":{start:{line:58,column:14},end:{line:58,column:45}},"9":{start:{line:59,column:2},end:{line:66,column:3}},"10":{start:{line:60,column:15},end:{line:60,column:60}},"11":{start:{line:61,column:4},end:{line:63,column:5}},"12":{start:{line:62,column:6},end:{line:62,column:19}},"13":{start:{line:64,column:4},end:{line:64,column:38}},"14":{start:{line:67,column:2},end:{line:67,column:37}},"15":{start:{line:70,column:13},end:{line:70,column:48}},"16":{start:{line:71,column:1},end:{line:71,column:22}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:50,column:23},end:{line:50,column:24}},loc:{start:{line:50,column:43},end:{line:54,column:1}},line:50},"1":{name:"(anonymous_1)",decl:{start:{line:57,column:26},end:{line:57,column:27}},loc:{start:{line:57,column:60},end:{line:68,column:1}},line:57}},branchMap:{"0":{loc:{start:{line:59,column:2},end:{line:66,column:3}},type:"if",locations:[{start:{line:59,column:2},end:{line:66,column:3}},{start:{line:59,column:2},end:{line:66,column:3}}],line:59},"1":{loc:{start:{line:61,column:4},end:{line:63,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:63,column:5}},{start:{line:61,column:4},end:{line:63,column:5}}],line:61}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"48f15b5981c8ff1d124822d0f6893043d69ab28a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_bkzqwdtfp=function(){return actualCoverage;};}return actualCoverage;}cov_bkzqwdtfp();// const mongoose=require('mongoose');
//
// mongoose.model("Admin",{
//
//   adminname:{
//     type:String,
//     require:true
//   },
//
//   key:{
//     type:Number,
//     require:true
//   },
//
//   password:{
//     type:String,
//     require:true
//   }
//
// });
const mongoose=(cov_bkzqwdtfp().s[0]++,require('mongoose'));const bcrypt=(cov_bkzqwdtfp().s[1]++,require('bcrypt'));const adminSchema=(cov_bkzqwdtfp().s[2]++,new mongoose.Schema({adminname:{type:String,require:true,unique:true},key:{type:Number,require:true},password:{type:String,require:true}}));//fire a function after doc saved to db
// adminSchema.post('save',function(doc,next){
//   console.log("NEW ADMIN WAS CREATED & SAVED",doc);
//   next();
// });
//fire a function before doc saved to db
cov_bkzqwdtfp().s[3]++;adminSchema.pre('save',async function(next){cov_bkzqwdtfp().f[0]++;const salt=(cov_bkzqwdtfp().s[4]++,await bcrypt.genSalt());cov_bkzqwdtfp().s[5]++;this.password=await bcrypt.hash(this.password,salt);cov_bkzqwdtfp().s[6]++;next();});//static method to login admin
cov_bkzqwdtfp().s[7]++;adminSchema.statics.login=async function(adminname,password){cov_bkzqwdtfp().f[1]++;const admin=(cov_bkzqwdtfp().s[8]++,await this.findOne({adminname}));cov_bkzqwdtfp().s[9]++;if(admin){cov_bkzqwdtfp().b[0][0]++;const auth=(cov_bkzqwdtfp().s[10]++,await bcrypt.compare(password,admin.password));cov_bkzqwdtfp().s[11]++;if(auth){cov_bkzqwdtfp().b[1][0]++;cov_bkzqwdtfp().s[12]++;return admin;}else{cov_bkzqwdtfp().b[1][1]++;}cov_bkzqwdtfp().s[13]++;throw Error('incorrect password');}else{cov_bkzqwdtfp().b[0][1]++;}cov_bkzqwdtfp().s[14]++;throw Error('incorrect adminname');};const Admin=(cov_bkzqwdtfp().s[15]++,mongoose.model('Admin',adminSchema));cov_bkzqwdtfp().s[16]++;module.exports=Admin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFkbWluLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImJjcnlwdCIsImFkbWluU2NoZW1hIiwiU2NoZW1hIiwiYWRtaW5uYW1lIiwidHlwZSIsIlN0cmluZyIsInVuaXF1ZSIsImtleSIsIk51bWJlciIsInBhc3N3b3JkIiwicHJlIiwibmV4dCIsInNhbHQiLCJnZW5TYWx0IiwiaGFzaCIsInN0YXRpY3MiLCJsb2dpbiIsImFkbWluIiwiZmluZE9uZSIsImF1dGgiLCJjb21wYXJlIiwiRXJyb3IiLCJBZG1pbiIsIm1vZGVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6InUxRUFlWTt5RkFmWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUMsS0FBTUEsQ0FBQUEsUUFBUSx5QkFBQ0MsT0FBTyxDQUFDLFVBQUQsQ0FBUixDQUFkLENBQ0EsS0FBTUMsQ0FBQUEsTUFBTSx5QkFBQ0QsT0FBTyxDQUFDLFFBQUQsQ0FBUixDQUFaLENBQ0EsS0FBTUUsQ0FBQUEsV0FBVyx5QkFBQyxHQUFJSCxDQUFBQSxRQUFRLENBQUNJLE1BQWIsQ0FBb0IsQ0FDcENDLFNBQVMsQ0FBQyxDQUNOQyxJQUFJLENBQUNDLE1BREMsQ0FFTk4sT0FBTyxDQUFDLElBRkYsQ0FHTk8sTUFBTSxDQUFDLElBSEQsQ0FEMEIsQ0FPakNDLEdBQUcsQ0FBQyxDQUNGSCxJQUFJLENBQUNJLE1BREgsQ0FFSFQsT0FBTyxDQUFDLElBRkwsQ0FQNkIsQ0FZbENVLFFBQVEsQ0FBQyxDQUNUTCxJQUFJLENBQUNDLE1BREksQ0FFUE4sT0FBTyxDQUFDLElBRkQsQ0FaeUIsQ0FBcEIsQ0FBRCxDQUFqQixDQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUQ7dUJBQ0FFLFdBQVcsQ0FBQ1MsR0FBWixDQUFnQixNQUFoQixDQUF1QixlQUFlQyxJQUFmLENBQW9CLHdCQUN6QyxLQUFNQyxDQUFBQSxJQUFJLHlCQUFDLEtBQU1aLENBQUFBLE1BQU0sQ0FBQ2EsT0FBUCxFQUFQLENBQVYsQ0FEeUMsdUJBRXpDLEtBQUtKLFFBQUwsQ0FBYyxLQUFNVCxDQUFBQSxNQUFNLENBQUNjLElBQVAsQ0FBWSxLQUFLTCxRQUFqQixDQUEwQkcsSUFBMUIsQ0FBcEIsQ0FGeUMsdUJBR3pDRCxJQUFJLEdBQ0wsQ0FKRCxFQU1BO3VCQUNBVixXQUFXLENBQUNjLE9BQVosQ0FBb0JDLEtBQXBCLENBQTBCLGVBQWViLFNBQWYsQ0FBeUJNLFFBQXpCLENBQWtDLHdCQUMxRCxLQUFNUSxDQUFBQSxLQUFLLHlCQUFDLEtBQU0sTUFBS0MsT0FBTCxDQUFhLENBQUNmLFNBQUQsQ0FBYixDQUFQLENBQVgsQ0FEMEQsdUJBRTFELEdBQUdjLEtBQUgsQ0FBUywyQkFDUCxLQUFNRSxDQUFBQSxJQUFJLDBCQUFDLEtBQU1uQixDQUFBQSxNQUFNLENBQUNvQixPQUFQLENBQWVYLFFBQWYsQ0FBd0JRLEtBQUssQ0FBQ1IsUUFBOUIsQ0FBUCxDQUFWLENBRE8sd0JBRVAsR0FBR1UsSUFBSCxDQUFRLG1EQUNOLE1BQU9GLENBQUFBLEtBQVAsQ0FDRCxDQUZELGdDQUZPLHdCQUtQLEtBQU1JLENBQUFBLEtBQUssQ0FBQyxvQkFBRCxDQUFYLENBRUQsQ0FQRCxnQ0FGMEQsd0JBVTFELEtBQU1BLENBQUFBLEtBQUssQ0FBQyxxQkFBRCxDQUFYLENBQ0QsQ0FYRCxDQWFDLEtBQU1DLENBQUFBLEtBQUssMEJBQUN4QixRQUFRLENBQUN5QixLQUFULENBQWUsT0FBZixDQUF1QnRCLFdBQXZCLENBQUQsQ0FBWCxDLHdCQUNBdUIsTUFBTSxDQUFDQyxPQUFQLENBQWVILEtBQWYiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb25zdCBtb25nb29zZT1yZXF1aXJlKCdtb25nb29zZScpO1xyXG4vL1xyXG4vLyBtb25nb29zZS5tb2RlbChcIkFkbWluXCIse1xyXG4vL1xyXG4vLyAgIGFkbWlubmFtZTp7XHJcbi8vICAgICB0eXBlOlN0cmluZyxcclxuLy8gICAgIHJlcXVpcmU6dHJ1ZVxyXG4vLyAgIH0sXHJcbi8vXHJcbi8vICAga2V5OntcclxuLy8gICAgIHR5cGU6TnVtYmVyLFxyXG4vLyAgICAgcmVxdWlyZTp0cnVlXHJcbi8vICAgfSxcclxuLy9cclxuLy8gICBwYXNzd29yZDp7XHJcbi8vICAgICB0eXBlOlN0cmluZyxcclxuLy8gICAgIHJlcXVpcmU6dHJ1ZVxyXG4vLyAgIH1cclxuLy9cclxuLy8gfSk7XHJcblxyXG4gY29uc3QgbW9uZ29vc2U9cmVxdWlyZSgnbW9uZ29vc2UnKTtcclxuIGNvbnN0IGJjcnlwdD1yZXF1aXJlKCdiY3J5cHQnKTtcclxuIGNvbnN0IGFkbWluU2NoZW1hPW5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gICBhZG1pbm5hbWU6e1xyXG4gICAgICAgdHlwZTpTdHJpbmcsXHJcbiAgICAgICByZXF1aXJlOnRydWUsXHJcbiAgICAgICB1bmlxdWU6dHJ1ZVxyXG4gICAgICB9LFxyXG5cclxuICAgICAga2V5OntcclxuICAgICAgICB0eXBlOk51bWJlcixcclxuICAgICAgIHJlcXVpcmU6dHJ1ZVxyXG4gICAgICB9LFxyXG5cclxuICAgICBwYXNzd29yZDp7XHJcbiAgICAgdHlwZTpTdHJpbmcsXHJcbiAgICAgICByZXF1aXJlOnRydWVcclxuICAgICB9LFxyXG4gfSk7XHJcblxyXG5cclxuIC8vZmlyZSBhIGZ1bmN0aW9uIGFmdGVyIGRvYyBzYXZlZCB0byBkYlxyXG4gLy8gYWRtaW5TY2hlbWEucG9zdCgnc2F2ZScsZnVuY3Rpb24oZG9jLG5leHQpe1xyXG4gLy8gICBjb25zb2xlLmxvZyhcIk5FVyBBRE1JTiBXQVMgQ1JFQVRFRCAmIFNBVkVEXCIsZG9jKTtcclxuIC8vICAgbmV4dCgpO1xyXG4gLy8gfSk7XHJcblxyXG4vL2ZpcmUgYSBmdW5jdGlvbiBiZWZvcmUgZG9jIHNhdmVkIHRvIGRiXHJcbmFkbWluU2NoZW1hLnByZSgnc2F2ZScsYXN5bmMgZnVuY3Rpb24obmV4dCl7XHJcbiAgY29uc3Qgc2FsdD1hd2FpdCBiY3J5cHQuZ2VuU2FsdCgpO1xyXG4gIHRoaXMucGFzc3dvcmQ9YXdhaXQgYmNyeXB0Lmhhc2godGhpcy5wYXNzd29yZCxzYWx0KTtcclxuICBuZXh0KCk7XHJcbn0pO1xyXG5cclxuLy9zdGF0aWMgbWV0aG9kIHRvIGxvZ2luIGFkbWluXHJcbmFkbWluU2NoZW1hLnN0YXRpY3MubG9naW49YXN5bmMgZnVuY3Rpb24oYWRtaW5uYW1lLHBhc3N3b3JkKXtcclxuICBjb25zdCBhZG1pbj1hd2FpdCB0aGlzLmZpbmRPbmUoe2FkbWlubmFtZX0pO1xyXG4gIGlmKGFkbWluKXtcclxuICAgIGNvbnN0IGF1dGg9YXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsYWRtaW4ucGFzc3dvcmQpO1xyXG4gICAgaWYoYXV0aCl7XHJcbiAgICAgIHJldHVybiBhZG1pbjtcclxuICAgIH1cclxuICAgIHRocm93IEVycm9yKCdpbmNvcnJlY3QgcGFzc3dvcmQnKTtcclxuXHJcbiAgfVxyXG4gIHRocm93IEVycm9yKCdpbmNvcnJlY3QgYWRtaW5uYW1lJyk7XHJcbn1cclxuXHJcbiBjb25zdCBBZG1pbj1tb25nb29zZS5tb2RlbCgnQWRtaW4nLGFkbWluU2NoZW1hKTtcclxuIG1vZHVsZS5leHBvcnRzPUFkbWluO1xyXG4iXX0=